@model IEnumerable<pishnahad.Models.never>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<div id="content" style="position:relative;right:-3000px">
    <h4>خطاهای ثبت شده</h4>
    <div>
        <a class="btn btn-outline-success rounded-pill" onclick="move_back()" asp-action="Create" onclick="move_back()">مورد جدید</a>
        <a class="btn btn-outline-info rounded-pill" data-toggle="modal" data-target="#modal_form">نمایش کدهای خطا</a>
        <a class="btn btn-outline-warning rounded-pill" asp-action="export_excel" asp-controller="nevers">انتقال گزارش کلی به اکسل</a>
    </div>
    <table id="dt" class="table table-striped  table-sm dataTable" cellspacing="0">
        <thead>
            <tr>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.num_khata)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_bimar_name_never)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_jensiat_never)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_sen_never)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_date_morajee_never)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_date_voghu_never)
                </th>
                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.demo_saat_never)
                </th>

                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.peyvast1_never)
                </th>

                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.peyvast2_never)
                </th>

                <th class="th-sm">
                    @Html.DisplayNameFor(model => model.sharh_never)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.num_khata)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_bimar_name_never)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_jensiat_never)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_sen_never)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_date_morajee_never)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_date_voghu_never)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.demo_saat_never)
                    </td>

                    <td>
                        @if (item.peyvast1_never == null)
                        {
                            <label>ندارد</label>
                        }
                        else
                        {
                            <label>دارد</label>
                        }
                    </td>

                    <td>
                        @if (item.peyvast2_never == null)
                        {
                            <label>ندارد</label>
                        }
                        else
                        {
                            <label>دارد</label>
                        }
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.sharh_never)
                    </td>
                    <td>
                        <a asp-action="Edit" onclick="move_back()" asp-route-id="@item.id_never"><i class="fa fa-pencil text-warning fa-2x pl-2" aria-hidden="true"></i></a>
                        <a asp-action="Delete" onclick="move_back()" asp-route-id="@item.id_never"><i class="fa fa-trash-o text-danger fa-2x pl-2" aria-hidden="true"></i></a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    @*modal*@
    <form>
        <div class="modal  fade" role="dialog" id="modal_form" tabindex="-1" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
                <div class="modal-content">
                    <div class="modal-header text-white bg-danger text-center">
                        <h4 class="modal-title w-100 text-success font-weight-bold">کد های خطا</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th style="width:10%">
                                    کد خطا
                                </th>
                                <th>
                                    عنوان خطا
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item1 in ViewBag.khata)
                            {
                                <tr>
                                    <td style="color:red;width:10%">
                                        @item1.num_khata
                                    </td>
                                    <td style="color:black">
                                        @item1.name_khata
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </form>
    @*modal*@
</div>
@section Scripts {

    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        $(document).ready(() => {
            $("#content").animate({ right: "0" });
            $(window).scrollTop($("#back").offset().top);
        });
    </script>
    <script>
        function move_back() {
            $("#content").animate({ right: "-3000" });
        }
    </script>

}
